#!/bin/bash
cd "${0%/*}" || exit 1    # Run from this directory
set -e                    # Exit immediately if a command fails

#------------------------------------------------------------------------------

# Mesh and setup
helyxRun blockMesh
helyxRun caseSetup

# Run
helyxRun helyxSolve

# Create dummy file for ParaView visualisation
touch planarPoiseuille.foam

# Calculate analytical solution for the start-up planar Poiseuille flow
ln -f ./system/fvOptions ./constant/fvOptions
helyxRun WatersKing

# Run the validation script
cd validation/
./createGraph

#------------------------------------------------------------------------------
