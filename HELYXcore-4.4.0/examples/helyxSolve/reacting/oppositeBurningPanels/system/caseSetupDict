/*--------------------------------*- C++ -*----------------------------------*\
|       o        |                                                            |
|    o     o     |  HELYX (R) : Open-source CFD for Enterprise                |
|   o   O   o    |  Version : 4.4.0                                           |
|    o     o     |  ENGYS Ltd. <http://engys.com/>                            |
|       o        |                                                            |
\*---------------------------------------------------------------------------*/
FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    object      caseSetupDict;
}
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

global
{
    modificationSwitches
    {
        resetInternalFields true;
        resetBoundaryFields true;
        resetSystemDicts true;
        resetConstDicts true;
        // Don't change boundary mesh (has offsets)
        resetBoundaryMesh false;
    }
    regionGroups ( fluids ( region0 ) solids ( panelRegion ) );
    system
    {
        controlDict
        {
            application     helyxSolve;
            startFrom       startTime;
            startTime       0;
            stopAt          endTime;
            endTime         5;
            deltaT          0.03;
            writeControl    adjustableRunTime;
            writeInterval   0.1;
            purgeWrite      0;
            writeFormat     binary;
            writePrecision  12;
            writeCompression off;
            timeFormat      general;
            timePrecision   6;
            graphFormat     raw;
            runTimeModifiable yes;
            adjustTimeStep  yes;
            maxCo           0.5;
            maxDi           0.25;
            maxDeltaT       0.02;
        }
    }
    functions
    {
        VR
        {
            type             volumeReport;
            regions          ( region0 );
            fields           ( T U p );
            executeControl   onEnd;
            writeControl     onEnd;
        }
    }
}

regions
{
    panelRegion
    {
        state ( );
        turbulenceModel laminar;
        materials ( solid gas );
        system
        {
            materialProperties
            {
                phases          ( solid gas );
                mixture         volumeMixture;
                energy          sensibleEnthalpy;
                materialType    multiphase;
                muModel scalarFunction1;
                muModelCoeffs { mu 0.0; }
                solid
                {
                    materialType    solid;
                    mixture         standardMixture;
                    species ( wood char );
                    wood
                    {
                        thermodynamics        hConst;
                        equationOfState       rhoConst;
                        molWeight             100;
                        kappaModel            constSolid;
                        kappaModelCoeffs      { kappa 0.135; }
                        thermodynamicsCoeffs  { Cp 696; Hf -1.41e6; Tref 298.15; }
                        equationOfStateCoeffs { rho 114.7; }
                    }
                    char
                    {
                        thermodynamics        hConst;
                        equationOfState       rhoConst;
                        molWeight             50;
                        kappaModel            constSolid;
                        kappaModelCoeffs      { kappa 0.4; }
                        thermodynamicsCoeffs  { Cp 611; Hf 0; Tref 298.15; }
                        equationOfStateCoeffs { rho 11.5; }
                    }
                }
                gas
                {
                    materialType    fluid;
                    mixture         standardMixture;
                    molWeight       18.0153;
                    equationOfState perfectGas;
                    thermodynamics  janaf;
                    thermodynamicsCoeffs
                    {
                        Tlow            200;
                        Thigh           5000;
                        Tcommon         1000;
                        highCpCoeffs    ( 2.67215 0.00305629 -8.73026e-07 1.20100e-10 -6.39162e-15 -29899.2 6.86282 );
                        lowCpCoeffs     ( 3.38684 0.00347498 -6.35470e-06 6.96858e-09 -2.50659e-12 -30208.1 2.59023 );
                    }
                    muModel         muSutherland;
                    muModelCoeffs { As 1.67212e-06; Ts 170.672;}
                    kappaModel      kappaSutherland;
                    kappaModelCoeffs { As 1.67212e-06; Ts 170.672;}
                }
                referenceFields { p [ 1 -1 -2 0 0 0 0 ] 0; }
            }
            fvSolution
            {
                solvers
                {
                    "h.solid|h.solidFinal" { solver PCG; preconditioner DIC; tolerance 1e-6; relTol 0; }
                    "rho.solid|rho.solidFinal" { solver PCG; preconditioner DIC; tolerance 0; relTol 0; }
                    Yi { solver PBiCGStab; preconditioner DILU; tolerance 1e-06; relTol 0; }
                }
                PIMPLE { nNonOrthCorr 0; }
                relaxationFactors { equations { h.solid 1; } }
            }
            fvSchemes
            {
                ddtSchemes { default Euler; }
                gradSchemes { default Gauss linear; }
                divSchemes { default none; }
                laplacianSchemes
                {
                    default         none;
                    laplacian(alpha.solid,h.solid) Gauss linear corrected;
                    laplacian(kappa.solid,T.solid) Gauss harmonic corrected;
                }
                interpolationSchemes { default linear; }
                snGradSchemes { default corrected; }
            }
            fvOptions { turbulenceSolver { type none; } }
        }
        constant
        {
            radiationProperties
            {
                radiation on;
                radiationModel  opaqueSolid;
                absorptionEmissionModel greyMeanSolid;
                greyMeanSolidCoeffs
                {
                    wood { absorptivity 0.17; emissivity 0.17; }
                    char { absorptivity 0.85; emissivity 0.85; }
                }
                scatterModel none;
                transmissivityModel none;
            }
            chemistryProperties
            {
                chemistryType { solver ode; chemistryThermo pyrolysis; }
                chemistry on;
                initialChemicalTimeStep 1e-07;
                odeCoeffs { solver seulex; absTol 1e-8; relTol 0.01; }
                gaseousSpecies (gas);
                reactions
                {
                    charReaction
                    {
                        type        irreversibleSolidArrheniusReaction;
                        reaction    "wood^4.86 = char + gas";
                        A           7.83e10;
                        Ta          15274.57;
                        Tcrit       400;
                    }
                }
            }
        }

        fieldMaps { wood.solid phase; char.solid phase; p p; T.solid T; Qr Intensity; Y0Default phase; }
        fields
        {
            p { initialisation { type fixedValue; value uniform 101325; } }
            T.solid { initialisation { type fixedValue; value uniform 294.75; } }
            wood.solid { initialisation { type fixedValue; value uniform 0.5; } }
            char.solid { initialisation { type fixedValue; value uniform 0.5; } }
            Qr { initialisation { type fixedValue; value uniform 0; } }
            Y0Default { initialisation { type fixedValue; value uniform 0; } }
        }
        boundaryConditions
        {
            fRight_zone_top
            {
                wood.solid { type zeroGradient; }
                char.solid { type zeroGradient; }
                p { type zeroGradient; }
                T.solid { type zeroGradient; }
                Qr { type zeroGradient; }
                Y0Default { type zeroGradient; }
            }
            fLeft_zone_top
            {
                wood.solid { type zeroGradient; }
                char.solid { type zeroGradient; }
                p { type zeroGradient; }
                T.solid { type zeroGradient; }
                Qr { type zeroGradient; }
                Y0Default { type zeroGradient; }
            }

            fRight_zone_side
            {
                wood.solid { type wedge; }
                char.solid { type wedge; }
                p { type wedge; }
                T.solid { type wedge; }
                Qr { type wedge; }
                Y0Default { type wedge; }
            }
            fLeft_zone_side
            {
                wood.solid { type wedge; }
                char.solid { type wedge; }
                p { type wedge; }
                T.solid { type wedge; }
                Qr { type wedge; }
                Y0Default { type wedge; }
            }
            region0_to_panelRegion_fLeft_zone
            {
                wood.solid { type zeroGradient; }
                char.solid { type zeroGradient; }
                p { type zeroGradient; }
                T.solid
                {
                    type                turbulentTemperatureRadCoupledMixed;
                    neighbourField      T;
                    kappaMethod         solidThermo;
                    QrNbr               Qr;
                    Qr                  none;
                    value               uniform 298.15;
                }
                Qr
                {
                    type            mappedField;
                    sampleRegion    region0;
                    sampleMode      nearestPatchFace;
                    samplePatch     region0_to_panelRegion_fLeft_zone;
                    offset          (0 0 0);
                    field           Qr;
                    setAverage      no;
                    average         0;
                    value           uniform 0;
                }
                Y0Default { type zeroGradient; }
            }
            region0_to_panelRegion_fRight_zone
            {
                wood.solid { type zeroGradient; }
                char.solid { type zeroGradient; }
                p { type zeroGradient; }
                T.solid
                {
                    type                turbulentTemperatureRadCoupledMixed;
                    neighbourField      T;
                    kappaMethod         solidThermo;
                    QrNbr               Qr;
                    Qr                  none;
                    value               uniform 298.15;
                }
                Qr
                {
                    type            mappedField;
                    sampleRegion    region0;
                    sampleMode      nearestPatchFace;
                    samplePatch     region0_to_panelRegion_fRight_zone;
                    offset          (0 0 0);
                    field           Qr;
                    setAverage      no;
                    average         0;
                    value           uniform 0;
                }
                Y0Default { type zeroGradient; }
            }
        }
    }

    region0
    {
        state ( transient les energy );
        turbulenceModel kEqn;
        materials ( O2 H2O C3H8 CO2 N2 );

        materialProperties
        {
            materialType fluid;
            energy       sensibleEnthalpy;
            mixture      standardMixture;
            buoyancyModel rhoModel;
            defaultSpecie N2;
            fuel        C3H8;
            species ( O2 H2O C3H8 CO2 N2 );
            O2
            {
                molWeight 31.9988;
                muModel muSutherland;
                kappaModel kappaSutherland;
                thermodynamics janaf;
                equationOfState perfectGas;
                thermodynamicsCoeffs
                {
                    Tlow            200;
                    Thigh           5000;
                    Tcommon         1000;
                    highCpCoeffs    ( 3.69758 0.00061352 -1.25884e-07 1.77528e-11 -1.13644e-15 -1233.93 3.18917 );
                    lowCpCoeffs     ( 3.21294 0.00112749 -5.75615e-07 1.31388e-09 -8.76855e-13 -1005.25 6.03474 );
                }
                muModelCoeffs { As 1.67212e-06; Ts 170.672; }
            }
            H2O
            {
                molWeight 18.0153;
                muModel muSutherland;
                kappaModel kappaSutherland;
                thermodynamics janaf;
                equationOfState perfectGas;
                thermodynamicsCoeffs
                {
                    Tlow            200;
                    Thigh           5000;
                    Tcommon         1000;
                    highCpCoeffs    ( 2.67215 0.00305629 -8.73026e-07 1.201e-10 -6.39162e-15 -29899.2 6.86282 );
                    lowCpCoeffs     ( 3.38684 0.00347498 -6.3547e-06 6.96858e-09 -2.50659e-12 -30208.1 2.59023 );
                }
                muModelCoeffs { As 1.67212e-06; Ts 170.672; }
            }
            C3H8
            {
                molWeight 44.01;
                muModel muSutherland;
                kappaModel kappaSutherland;
                thermodynamics janaf;
                equationOfState perfectGas;
                thermodynamicsCoeffs
                {
                    Tlow            200;
                    Thigh           5000;
                    Tcommon         1000;
                    highCpCoeffs    ( 7.5341368 0.018872239 -6.2718491e-06 9.1475649e-10 -4.7838069e-14 -16467.516 -17.892349 );
                    lowCpCoeffs     ( 0.93355381 0.026424579 6.1059727e-06 -2.1977499e-08 9.5149253e-12 -13958.52 19.201691 );
                }
                muModelCoeffs { As 1.67212e-06; Ts 170.672; }
            }
            CO2
            {
                molWeight 44.01;
                muModel muSutherland;
                kappaModel kappaSutherland;
                thermodynamics janaf;
                equationOfState perfectGas;
                thermodynamicsCoeffs
                {
                    Tlow            200;
                    Thigh           5000;
                    Tcommon         1000;
                    highCpCoeffs    ( 4.45362 0.00314017 -1.27841e-06 2.394e-10 -1.66903e-14 -48967 -0.955396 );
                    lowCpCoeffs     ( 2.27572 0.00992207 -1.04091e-05 6.86669e-09 -2.11728e-12 -48373.1 10.1885 );
                }
                muModelCoeffs { As 1.67212e-06; Ts 170.672; }
            }
            N2
            {
                molWeight 28.0134;
                muModel muSutherland;
                kappaModel kappaSutherland;
                equationOfState perfectGas;
                thermodynamics janaf;
                thermodynamicsCoeffs
                {
                    Tlow            200;
                    Thigh           5000;
                    Tcommon         1000;
                    highCpCoeffs    ( 2.92664 0.00148798 -5.68476e-07 1.0097e-10 -6.75335e-15 -922.798 5.98053 );
                    lowCpCoeffs     ( 3.29868 0.00140824 -3.96322e-06 5.64152e-09 -2.44486e-12 -1020.9 3.95037 );
                }
                muModelCoeffs { As 1.67212e-06; Ts 170.672; }
            }
            referenceFields { p [ 1 -1 -2 0 0 0 0 ] 101325; }
        }
        system
        {
            fvOptions
            {
                reactionsSource { type reactionsSource; isReactingFoam true; }
                pyrolysis { type pyrolysisSource; }
            }
            fvSolution
            {
                solvers
                {
                    rho { solver PCG; preconditioner DIC; tolerance 0; relTol 0; };
                    rhoFinal  { solver PCG; preconditioner DIC; tolerance 0; relTol 0; };
                    p { solver GAMG; tolerance 1e-6; relTol 0.01; smoother GaussSeidel; };
                    pFinal { solver GAMG; tolerance 1e-6; relTol 0; smoother GaussSeidel; };
                    "(U|Yi|h|k|omega)" { solver PBiCGStab; preconditioner DILU; tolerance 1e-6; relTol 0.1; nSweeps 1; };
                    "(U|Yi|h|k|omega)Final" { solver PBiCGStab; preconditioner DILU; tolerance 1e-6; relTol 0; nSweeps 1; };
                    Ii
                    {
                        solver                  GAMG;
                        tolerance               1e-4;
                        relTol                  0;
                        smoother                symGaussSeidel;
                        maxIter                 1;
                        nPostSweeps             1;
                    }

                    "(G)Final"
                    {
                        solver          PCG;
                        preconditioner  DIC;
                        tolerance       1e-04;
                        relTol          0;
                    }
                }

                PIMPLE
                {
                    momentumPredictor yes;
                    nOuterCorrectors  1;
                    nCorrectors       2;
                    nNonOrthogonalCorrectors 0;
                }
                relaxationFactors
                {
                    equations
                    {
                        ".*"            1;
                    }
                }
            }
            fvSchemes
            {
                ddtSchemes { default Euler; }
                gradSchemes
                {
                    turbulence      Gauss linear;
                    grad(k)         Gauss linear;
                    default         Gauss linear;
                    gradU           Gauss linear;
                    grad(p)         leastSquares;
                    grad(h)         Gauss linear;
                    grad(e)         Gauss linear;
                    grad(K)         Gauss linear;
                    grad(T)         Gauss linear;
                }
                divSchemes
                {
                    default         none;
                    div(phi,U)      Gauss LUST grad(U);
                    div(phi,k)      Gauss limitedLinear 1;
                    div(phi,K)      Gauss limitedLinear 1;
                    div(Ji,hi)      Gauss limitedLinear 1;
                    div(phi,h)      Gauss deferred vanLeer;
                    div(phi,Yi) Gauss multivariateSelection
                    {
                        O2              linearUpwind grad(O2);
                        N2              linearUpwind grad(N2);
                        C3H8            linearUpwind grad(C3H8);
                        H2O             linearUpwind grad(H2O);
                        CO2             linearUpwind grad(CO2);
                        h               linearUpwind grad(h);
                    };
                    div(((rho*nuEff)*dev2(T(grad(U))))) Gauss linear;
                    div(phiU,p)     Gauss linear;
                    div(Ji,Ii_h)    Gauss upwind;
                }
                laplacianSchemes
                {
                    laplacian((rho*DkEff),k) Gauss linear uncorrected;
                    laplacian((rho*nuEff),U) Gauss linear uncorrected;
                    laplacian(rhorAUf,p) Gauss linear uncorrected;
                    default         Gauss linear uncorrected;
                    laplacian(rhoD_Yi,Yi) Gauss linear uncorrected;
                    laplacian(kappa,T) Gauss linear uncorrected;
                    Gauss           linear uncorrected;
                }
                interpolationSchemes { default linear; }
                snGradSchemes { default corrected; }
            }
        }
        constant
        {
            pyrolysisZones
            {
                pyrolysis
                {
                    active          true;
                    pyrolysisModel  reactingOneDim;
                    region          panelRegion;
                    reactingOneDimCoeffs
                    {
                        // Energy source term due to pyrolysis gas
                        gasHSource      false;
                        // Energy source term due in depht radiation
                        qrHSource       false;
                        minimumDelta    1e-12;
                        reactionDeltaMin 1e-12;
                        moveMesh        false;
                    }
                    infoOutput      true;
                }
            }

            turbulenceProperties
            {
                LES
                {
                    LESModel        kEqn;
                    delta           cubeRootVol;
                    turbulence      on;
                    printCoeffs     on;
                    kEqnCoeffs { Prt 1; }
                    cubeRootVolCoeffs
                    {
                        deltaCoeff 1;
                    }
                    PrandtlCoeffs
                    {
                        delta cubeRootVol;
                        cubeRootVolCoeffs { deltaCoeff 1; }
                        smoothCoeffs
                        {
                            delta cubeRootVol;
                            cubeRootVolCoeffs { deltaCoeff 1; }
                            maxDeltaRatio 1.1;
                        }
                        Cdelta 0.158;
                    }
                    vanDriestCoeffs
                    {
                        delta cubeRootVol;
                        cubeRootVolCoeffs { deltaCoeff 1; }
                        smoothCoeffs
                        {
                            delta cubeRootVol;
                            cubeRootVolCoeffs { deltaCoeff 1; }
                            maxDeltaRatio   1.1;
                        }
                        Aplus           26;
                        Cdelta          0.158;
                    }
                    smoothCoeffs
                    {
                        delta cubeRootVol;
                        cubeRootVolCoeffs { deltaCoeff 1; }
                        maxDeltaRatio 1.1;
                    }
                }
            }
            combustionProperties
            {
                combustionModel infinitelyFastChemistry;
                infinitelyFastChemistryCoeffs { C 10; semiImplicit false; }
                reaction
                {
                    reaction "C3H8 + 5O2 + 18.8N2 = 3CO2 + 4H2O + 18.8N2";
                }
            }

            g { value (0 -9.80665 0); }

            radiationProperties
            {
                radiation on;
                radiationModel fvDOM;
                fvDOMCoeffs { nPhi 3; nTheta 6; convergence 0.05; maxIter 3; }

                // Number of flow iterations per radiation iteration
                solverFreq 10;
                absorptionEmissionModel constant;
                constantCoeffs { absorptivity 0.01; emissivity 0.01; E 0; }
                scatterModel none;
                sootModel none;
                transmissivityModel none;
            }

            boundaryRadiationProperties
            {
                ".*"
                {
                    type            boundaryRadiation;
                    mode            lookup;
                    emissivity      1.0;
                }
                "(region0_to.*)"
                {
                    type            boundaryRadiation;
                    mode            solidRadiation;
                }
            }
        }

        fieldMaps { IDefault Intensity; G Intensity; }

        fields
        {
            alphat { initialisation { type fixedValue; value uniform 0; } }
            T { initialisation { type fixedValue; value uniform 298.15; } }
            k { initialisation { type fixedValue; value uniform 1e-5; } }
            nut { initialisation { type fixedValue; value uniform 0; } }
            p { initialisation { type buoyantPressure; initialValue uniform 0; } }
            U { initialisation { type fixedValue; value uniform (0 0 0); } }
            C3H8 { initialisation { type fixedValue; value uniform 0; } }
            N2 { initialisation { type fixedValue; value uniform 0.76699; } }
            O2 { initialisation { type fixedValue; value uniform 0.23301; } }
            IDefault { initialisation { type fixedValue; value uniform 0; } }
            G { initialisation { type fixedValue; value uniform 0; } }
        }
        boundaryConditions
        {
            ground
            {
                alphat { type alphatWallFunction; value uniform 0; }
                k { type zeroGradient; }
                nut { type fixedValue; value uniform 0; }
                p { type fixedFluxPressure; value uniform 0; }
                T { type zeroGradient; }
                U { type fixedValue; value uniform (0 0 0); }
                C3H8 { type zeroGradient; }
                N2 { type zeroGradient; }
                O2 { type zeroGradient; }
                H2O { type zeroGradient; }
                CO2 { type zeroGradient; }
                Ydefault { type zeroGradient; }
                IDefault { type greyDiffusiveRadiation; value uniform 0; }
                G { type MarshakRadiation; value uniform 0; }
            }
            top
            {
                alphat { type zeroGradient; }
                k { type inletOutlet; inletValue uniform 1e-5; value uniform 1e-5; }
                nut { type zeroGradient; }
                p { type totalPressure; p0 uniform 0; value uniform 0; addStaticHead true; }
                T { type inletOutlet; inletValue uniform 298.15; value uniform 298.15; }
                U { type pressureInletOutletVelocity; value uniform (0 0 0); }
                C3H8 { type inletOutlet; inletValue uniform 0; value uniform 0; }
                N2 { type inletOutlet; inletValue uniform 0.76699; value uniform 0.76699; }
                O2 { type inletOutlet; inletValue uniform 0.23301; value uniform 0.23301; }
                H2O { type inletOutlet; inletValue uniform 0; value uniform 0; }
                CO2 { type inletOutlet; inletValue uniform 0; value uniform 0; }
                Ydefault { type inletOutlet; inletValue uniform 0.0; value uniform 0.0; }
                IDefault { type greyDiffusiveRadiation; value uniform 0; }
                G { type MarshakRadiation; value uniform 0; }
            }
            burner
            {
                alphat { type zeroGradient; }
                k { type fixedValue; value uniform 1e-5; }
                nut { type zeroGradient; }
                p { type fixedFluxPressure; value uniform 0; }
                T { type fixedValue; value uniform 371.15; }
                // 60kW  C3H8
                U { type flowRateInletVelocity; massFlowRate constant 0.001294; value uniform (0 0 0); }
                C3H8 { type totalFlowRateAdvectiveDiffusive; value uniform 1.0; }
                N2 { type fixedValue; value uniform 0.76699; }
                O2 { type fixedValue; value uniform 0; }
                H2O { type fixedValue; value uniform 0; }
                CO2 { type fixedValue; value uniform 0; }
                Ydefault { type fixedValue; value uniform 0; }
                IDefault { type greyDiffusiveRadiation; value uniform 0; }
                G { type MarshakRadiation; value uniform 0; }
            }
            sides
            {
                alphat { type zeroGradient; }
                k { type inletOutlet; inletValue uniform 1e-5; value uniform 1e-5; }
                nut { type zeroGradient; }
                p { type totalPressure; p0 uniform 0; value uniform 0; addStaticHead true; }
                T { type inletOutlet; inletValue uniform 298.15; value uniform 298.15; }
                U { type pressureInletOutletVelocity; value uniform (0 0 0); }
                C3H8 { type inletOutlet; inletValue uniform 0; value uniform 0; }
                N2 { type inletOutlet; inletValue uniform 0.76699; value uniform 0.76699; }
                O2 { type inletOutlet; inletValue uniform 0.23301; value uniform 0.23301; }
                H2O { type inletOutlet; inletValue uniform 0; value uniform 0; }
                CO2 { type inletOutlet; inletValue uniform 0; value uniform 0; }
                Ydefault { type inletOutlet; inletValue uniform 0.0; value uniform 0.0; }
                IDefault { type greyDiffusiveRadiation; value uniform 0; }
                G { type MarshakRadiation; value uniform 0; }
            }
            "(region0_to.*)"
            {
                alphat { type alphatWallFunction; value uniform 0; }
                k { type zeroGradient; }
                nut { type nutUSpaldingWallFunction; value uniform 0; }
                p { type fixedFluxPressure; value uniform 0; }
                T
                {
                    type            turbulentTemperatureRadCoupledMixed;
                    Tnbr            T.solid;
                    kappaMethod     fluidThermo;
                    QrNbr           none;
                    Qr              Qr;
                    value           uniform 298.15;
                }
                U { type mappedFlowRate; nbrPhi phiGas; value uniform (0 0 0); }
                C3H8 { type totalFlowRateAdvectiveDiffusive; value uniform 0; }
                O2 { type zeroGradient; }
                N2 { type zeroGradient; }
                H2O { type zeroGradient; }
                CO2 { type zeroGradient; }
                Ydefault { type zeroGradient; }
                IDefault { type greyDiffusiveRadiation; value uniform 0; }
                G { type MarshakRadiation; value uniform 0; }
            }
        }
    }
}


// ************************************************************************* //
