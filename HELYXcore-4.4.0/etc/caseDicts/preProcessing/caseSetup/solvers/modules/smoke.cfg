smoke
{
    fieldMaps
    {
        smoke phase;
        Dtsmoke D;
    }

    system
    {
        fvSchemes
        {
            divSchemes
            {
                div(phi,smoke)    bounded Gauss deferred vanLeer;
            }
        }
        fvSolution
        {
            solvers
            {
                smoke {#include "../../settings/matrixSolvers/steadySmoothSolver.cfg"}
            }
            relaxationFactors
            {
                equations
                {
                    smoke 0.7;
                }
            }
        }

        fvOptions
        {
            Ysmoke
            {
                type        concentrationTransport;
                active      true;
                hookOp      solve;
                fieldName   smoke;
            }
        }
    }

    requirements
    {
        AND ();
        OR
        (
            simpleFoam
            simpleFoam2

            buoyantBousinesqSimpleFoam
            buoyantBousinesqSimpleFoam2

            pisoFoamRAS
            pisoFoamLES
            pisoFoamRAS2
            pisoFoamLES2

            pimpleFoamRAS
            pimpleFoamLES

            buoyantBousinesqPimpleFoamRAS
            buoyantBousinesqPimpleFoamLES
            buoyantBousinesqPimpleFoamRAS2
            buoyantBousinesqPimpleFoamLES2

            rhoSimpleFoam
            rhoSimpleFoam2

            rhoPimpleFoamRAS
            rhoPimpleFoamLES
            rhoPimpleFoamRAS2
            rhoPimpleFoamLES2

            buoyantSimpleFoam
            buoyantSimpleFoam2

            buoyantPimpleFoamRAS
            buoyantPimpleFoamRAS2
            buoyantPimpleFoamLES
            buoyantPimpleFoamLES2

            helyxCoupled
            tHelyxCoupledRAS
            tHelyxCoupledLES

            pressureCoupledS
            pressureCoupledTRAS
            pressureCoupledTLES

            segregatedS
            segregatedTRAS
            segregatedTLES
        );
        conditional
        {
            physicalValues
            {
                Dsmoke   Dsmoke   [0 2 -1 0 0 0 0] 1.79e-5;
                Sctsmoke Sctsmoke [0 0 0 0 0 0 0] 0.7;
            }
            constantTransport
            {
                constant
                {
                    transportProperties
                    {
                        $physicalValues
                    }
                }
            }
            constantThermo
            {
                constant
                {
                    thermophysicalProperties
                    {
                        $physicalValues
                    }
                }
            }
            systemMaterials
            {
                system
                {
                    materialProperties
                    {
                        smokeconcentrationTransport
                        {
                            D   [0 2 -1 0 0 0 0] 1.79e-5;
                            Sct 0.7;
                        }
                    }
                }
            }
            transIncomp
            {
                system
                {
                    fvSolution
                    {
                        solvers
                        {
                            smokeFinal {#include "../../settings/matrixSolvers/transientSmoothSolver.cfg"}
                        }
                        relaxationFactors
                        {
                            equations
                            {
                                smoke 1;
                            }
                        }
                    }
                }
            }
            "buoyantBousinesqPimpleFoam.*" {$transIncomp $constantTransport}
            "pimpleFoam.*" {$transIncomp $constantTransport}
            "pisoFoam.*" {$transIncomp $constantTransport}
            "tHelyxCoupled.*" {$transIncomp $constantTransport}
            "buoyantBousinesqSimpleFoam.*" {$constantTransport $constantTransport}
            "simpleFoam.*" {$constantTransport $constantTransport}

            helyxCoupled
            {
                system
                {
                    fvSolution
                    {
                        relaxationFactors
                        {
                            equations
                            {
                                smoke 1;
                            }
                        }
                    }
                }
            }

            transComp
            {
                fieldMaps
                {
                    Dtsmoke Dcompressible;
                }
                system
                {
                    fvSolution
                    {
                        solvers
                        {
                            smokeFinal {#include "../../settings/matrixSolvers/transientSmoothSolver.cfg"}
                        }
                        relaxationFactors
                        {
                            equations
                            {
                                smoke 1;
                            }
                        }
                    }
                }
            }
            unboundedDiv
            {
                system
                {
                    fvSchemes
                    {
                        divSchemes
                        {
                            div(phi,smoke)    Gauss deferred vanLeer;
                        }
                    }
                }
            }
            "rhoPimpleFoam.*" {$transComp $unboundedDiv $constantThermo}
            "buoyantPimpleFoam.*" {$transComp $unboundedDiv $constantThermo}
            "segregatedT.*" {$transComp $systemMaterials}

            transCoupledComp
            {
                $transComp
                system
                {
                    fvSolution
                    {
                        relaxationFactors
                        {
                            equations
                            {
                                smoke 0.7;
                                smokeFinal 1;
                            }
                        }
                    }
                }
            }
            "pressureCoupledT.*" {$transCoupledComp $systemMaterials}

            steadyComp
            {
                fieldMaps
                {
                    Dtsmoke Dcompressible;
                }
            }
            "rhoSimpleFoam.*" {$steadyComp $constantThermo}
            "buoyantSimpleFoam.*" {$steadyComp $constantThermo}
            segregatedS {$steadyComp $systemMaterials}

            pressureCoupledCompressible
            {
                $steadyComp
                system
                {
                    fvSolution
                    {
                        relaxationFactors
                        {
                            equations
                            {
                                smoke 0.95;
                            }
                        }
                    }
                }
            }

            pressureCoupledS {$pressureCoupledCompressible $systemMaterials}
        }
        NOT ();
    }
}
