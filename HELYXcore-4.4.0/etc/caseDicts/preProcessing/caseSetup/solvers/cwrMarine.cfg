$simpleFoam
stateType simpleFoam;

fieldMaps
{
    zeta distance;
}

system
{
    fvSchemes
    {
        gradSchemes 
        {
            grad(p_rgh) taylorGauss linear;
            grad(p) taylorGauss linear;
            gradT cellLimited Gauss linear 1;
        }
        divSchemes
        {
            div(phi,T) bounded Gauss linearUpwind gradT;
        }
    }
    fvSolution
    {
        solvers 
        {
        }
        relaxationFactors 
        {
        }
    }
    faSchemes
    {
        divSchemes
        {
            div(phis,eta) Gauss Gamma 0.3 phis; 
            //increase coefficient for more stability
        }

        gradSchemes
        {
            grad(eta) faceLimited Gauss linear 1;
            //decrease coefficient for more accuracy in the skewness corrector
        }

        laplacianSchemes
        {
        }
    }
    faSolution
    {
        solvers
        {
            eta
            {
                solver          smoothSolver;
                smoother        DILUGaussSeidel;
                tolerance       1e-5;
                relTol          0.01;
                minIter         1;
                preconditioner  DILU;
            }
        }

        relaxationFactors
        {
            fields
            {
            }
            equations
            {
                eta            0.1;
            }
        }
    }
    controlDict
    {
        application cwrEcomarine;
    }
}

constant
{
    g{$g}
    freeSurfaceProperties
    {
        Ufs             ( 10 0 0 );
        beach           true;
        beachPatches    (  );
        beachDistance   2;
        beachWidth      1;
        solverStart     100;
        L0              0.1;
        cellRelaxPower  0.8;
        Csmooth         1;
        nHullDepthCorr  0;
        freeSurfaceName freeSurface;
    }
}
fields
{
    zeta
    {
        fieldDefinition
        {
            boundaryTypeDefaults
            {
                wall 
                {
                    type            freeSurfaceHeight;
                    value           uniform 0.0;
                    CtranPow        1;
                    CtranOff        0.3;
                    CtranMul        0.05;
                }
                outlet {type zeroGradient;}
            }
        }
    }
}
